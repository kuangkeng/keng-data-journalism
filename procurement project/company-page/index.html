<meta http-equiv="Content-Type" content="text/html; charset=utf-8">

<style type="text/css">
    
    body {
        width:800px;
        margin:10px auto;
        font-family:arial;
        font-size:12px;
    }

    td, th { border: 1px #ccc solid; 
             font-size:10px;
            }

    table { border-collapse: collapse; }

    tr:nth-child(even) {background-color: #FAFAFA;}

    th { background-color: #3F9AF2;
         color:#FFFFFF;
        }

</style>

<h1>Keng loading in a table based on the table id you put in the hash.</h1>

<h5 class="Chart title">Showing table for <span class="hash-name">Monkeys</span></h5>

<table class="example-table">

</table>



<script src="http://d3js.org/d3.v3.min.js" charset="utf-8"></script>

<script type="text/javascript">

var company = getTeamIdFromHash();
d3.select(".hash-name").text(company);
console.log(company);

d3.csv("data/" + company + ".csv", function(data) {

    console.log("data", data);
    // the columns you'd like to display
    var columns = ["Company", "Tender Details", "Tender No.", "Procurement Category", "Govt Agency", 
    "Reg. No.", "MOF Reg. No.", "Value(RM)"];

    var table = d3.select(".example-table").append("table"),
        thead = table.append("thead"),
        tbody = table.append("tbody");

    // append the header row
    thead.append("tr")
        .selectAll("th")
        .data(columns)
        .enter()
        .append("th")
            .text(function(column) { return column; });

    // create a row for each object in the data
    var rows = tbody.selectAll("tr")
        .data(data)
        .enter()
        .append("tr");

    // create a cell in each row for each column
    var cells = rows.selectAll("td")
        .data(function(row) {
            return columns.map(function(column) {
                return {column: column, value: row[column]};
            });
        })
        .enter()
        .append("td")
            .text(function(d) { return d.value; });
});


function getTeamIdFromHash() {
  if (window.location.href.indexOf("companyId") > -1 ) {
    return window.location.href.split("companyId=")[1];
  }
  else {
    throw "error loading team id from hash";
  }
}

</script>

